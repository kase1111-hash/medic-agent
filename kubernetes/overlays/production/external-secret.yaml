# Medic Agent - External Secret (Production)
# Phase 7: Deployment & Operations
#
# Configure this for your secrets manager
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: medic-agent-secrets
  namespace: medic-agent
  labels:
    app.kubernetes.io/name: medic-agent
    app.kubernetes.io/component: secrets
    app.kubernetes.io/environment: production
spec:
  refreshInterval: 1h
  secretStoreRef:
    # TODO: Update with your ClusterSecretStore name
    name: cluster-secret-store
    kind: ClusterSecretStore
  target:
    name: medic-agent-secrets
    creationPolicy: Owner
    template:
      type: Opaque
      metadata:
        labels:
          app.kubernetes.io/name: medic-agent
          app.kubernetes.io/component: secrets
          app.kubernetes.io/environment: production
  data:
    # SIEM API Key
    - secretKey: SIEM_API_KEY
      remoteRef:
        # TODO: Update with your secrets manager path
        key: production/medic-agent/siem
        property: api_key

    # Redis password (uncomment if needed)
    # - secretKey: REDIS_PASSWORD
    #   remoteRef:
    #     key: production/medic-agent/redis
    #     property: password
